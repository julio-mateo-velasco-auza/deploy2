---
const { isPrivate = false } = Astro.props as { isPrivate?: boolean };
const now = new Date();
const hour = now.getHours();
const saludo = hour < 12 ? 'Buenos días' : hour < 19 ? 'Buenas tardes' : 'Buenas noches';
---
<section
  id="home-hero"
  class="relative h-screen min-h-[700px] w-full overflow-hidden"
  aria-label="Hero Inbolsa"
>
  {isPrivate ? (
    <div class="absolute inset-0">
      <video
        id="heroVideoPrivado"
        class="w-full h-full object-cover"
        src="/media/privado/institucional-privado.mp4"
        autoplay
        muted
        loop
        playsinline
      ></video>
    </div>
  ) : (
    <div
      id="hero-bg"
      class="absolute inset-0 will-change-transform"
      style="
        background-image:url('/img/landing1.jpg');
        background-size:cover;
        background-position:center;
        transform: translateY(var(--parallax,0px));
      "
    ></div>
  )}

  <div class="absolute inset-0 bg-gradient-to-b from-black/50 via-black/30 to-black/50"></div>

  <div class="relative z-10 mx-auto flex h-full w-full max-w-7xl flex-col items-center justify-center px-4 text-center">
    <!-- Logo -->
    <img
      src="/logo.png"
      alt="Inbolsa"
      class="mb-8 h-36 w-auto sm:h-44 md:h-52 lg:h-60 drop-shadow-[0_10px_30px_rgba(0,0,0,.5)]"
      loading="eager"
      decoding="sync"
    />
    
    <!-- Saludo sutil -->
    <p class="text-white/70 text-sm sm:text-base mb-4">{saludo}, te damos la bienvenida.</p>
    
    <!-- Título principal - GRANDE -->
    <h1 class="text-4xl font-bold tracking-tight text-white sm:text-5xl md:text-6xl lg:text-7xl">
      Inbolsa es <span class="text-brand-300">Calidad Superior</span>
    </h1>

    <!-- CTAs -->
    <div class="mt-12 flex flex-wrap items-center justify-center gap-4">
      <a
        href="/valores"
        class="rounded-xl bg-white px-8 py-4 text-base font-semibold text-slate-900 transition hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-white/30 shadow-xl"
      >
        Conocer más
      </a>
      <a
        href="/contacto"
        class="rounded-xl border-2 border-white/70 bg-white/10 px-8 py-4 text-base font-semibold text-white backdrop-blur-sm transition hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/30"
      >
        Contáctanos
      </a>
    </div>
  </div>

  {!isPrivate && (
    <script is:inline>
      const bg = document.getElementById('hero-bg');
      const root = document.getElementById('home-hero');
      const onScroll = () => {
        if (!bg || !root) return;
        const rect = root.getBoundingClientRect();
        const scrolled = Math.max(0, -rect.top);
        bg.style.setProperty('--parallax', (scrolled * 0.25).toFixed(1) + 'px');
      };
      onScroll();
      window.addEventListener('scroll', onScroll, { passive: true });
    </script>
  )}
</section>