---
// TODO(claude): Página de productos privados accesibles solo con QR
// src/pages/productos.astro
export const prerender = true;

import Base from '../layouts/Base.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const pageTitle = 'Productos';

const CATALOG = [
  { cat: 'Sacos PP', items: [
    { id:'sacos-convencionales',   name:'Sacos Convencionales',   img:'/inbolsaNeo/imgs/bolsa-chica.jpg' },
    { id:'sacos-red', name:'Sacos de red', img:'/inbolsaNeo/imgs/bolsa-mediana.jpg' },
    { id:'sacos-laminados',  name:'Sacos laminados',  img:'/inbolsaNeo/imgs/bolsa-enorme.jpg' },
    { id:'sacos-laminacion-premium',  name:'Sacos con laminacion premium',  img:'/inbolsaNeo/imgs/bolsa-enorme.jpg' },
    { id:'sacos-planos',  name:'Sacos planos',  img:'/inbolsaNeo/imgs/bolsa-enorme.jpg' },
    { id:'sacos-fondo-cuadrado',  name:'Sacos con fondo cuadrado',  img:'/inbolsaNeo/imgs/bolsa-enorme.jpg' },
  ]},
  { cat: 'Big Bag', items: [
    { id:'big-bag-tubular',  name:'Big Bag Tubular', img:'/inbolsaNeo/imgs/hilo-algodon.jpg' },
    { id:'big-bag-u-panel',    name:'Big Bag U Panel',   img:'/inbolsaNeo/imgs/hilo-nylon.jpg' },
    { id:'big-bag-cuadripanel',    name:'Big Bag cuadripanel',   img:'/inbolsaNeo/imgs/hilo-nylon.jpg' },
    { id:'big-bag-compartimentada',    name:'Big Bag compartimentada',   img:'/inbolsaNeo/imgs/hilo-nylon.jpg' },
    { id:'sling-bag',    name:'Sling Bag',   img:'/inbolsaNeo/imgs/hilo-nylon.jpg' },
  ]},
  { cat: 'Telas', items: [
    { id:'tela-plana',  name:'Tela plana', img:'/inbolsaNeo/imgs/hilo-algodon.jpg' },
    { id:'tela-tubular',    name:'Tela tubular',   img:'/inbolsaNeo/imgs/hilo-nylon.jpg' },
  ]},
  { cat: 'Hilos y sogas', items: [
    { id:'hilo-plano',  name:'Hilo Plano', img:'/inbolsaNeo/imgs/hilo-algodon.jpg' },
    { id:'hilo-multifilamentado',    name:'Hilo multifilamento',   img:'/inbolsaNeo/imgs/hilo-nylon.jpg' },
    { id:'hilo-reforzado-pp',    name:'Hilo reforzado pp',   img:'/inbolsaNeo/imgs/hilo-nylon.jpg' },
    { id:'hilo-reforzado-multifilamento',    name:'Hilo reforzado multifilamento',   img:'/inbolsaNeo/imgs/hilo-nylon.jpg' },
    { id:'amarres',    name:'Amarres',   img:'/inbolsaNeo/imgs/hilo-nylon.jpg' },
  ]},
];

const slugify = (value: string) =>
  value
    .toLowerCase()
    .normalize('NFD')
    .replace(/[\u0300-\u036f]/g, '')
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/^-+|-+$/g, '');

const PRODUCT_NAV = CATALOG.map((group) => ({
  id: slugify(group.cat),
  label: group.cat,
}));

const PRODUCT_DETAILS = {
  'sacos-convencionales': {
    name: 'Sacos Convencionales',
    category: 'Sacos PP',
    cover: '/inbolsaNeo/imgs/bolsa-chica.jpg',
    shortDescription: 'Saco de rafia versátil para cargas a granel y productos agroindustriales.',
    summary: 'La estructura tramada permite flujo de aire constante, ideal para productos que continúan respirando en postcosecha.',
    description: [
      'Nuestros sacos convencionales están fabricados con tejido de polipropileno de alta resistencia, ofreciendo una protección confiable frente a la manipulación, el transporte y las condiciones ambientales. Diseñados con costura reforzada en la base o el fondo, garantizan una excelente capacidad de carga y durabilidad, convirtiéndolos en la elección ideal para diversas industrias como la agroindustrial, alimentaria y de materiales a granel. Cada saco es elaborado bajo estrictos estándares de calidad, priorizando la resiliencia, la seguridad y la funcionalidad. Además, contamos con múltiples opciones de personalización, desde tamaños y gramajes hasta colores, impresiones y acabados especiales, para adaptar cada producto a las necesidades específicas de nuestros clientes.'
    ],
    features: [
      'Impresión de hasta 8 colores',
      'Formato: externa, laterales',
      'Color de envase: Multicolor hasta transparente',
      'Se entrega plegado y termoencogido para optimizar almacenamiento.',
      'Capacidad de envase: Hasta 60 Kg',
      'Dimensiones: 40-80 cm de ancho (consulte por otras anchuras)',
      'Opciones de coostura: Lateral, superior, inferior hilo resaltado'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/Asas.PNG',
      '/inbolsaNeo/imgs/icons/Costurapersonalizable.PNG',
      '/inbolsaNeo/imgs/icons/Fuelles.PNG',
      '/inbolsaNeo/imgs/icons/Impresiones.PNG',
    ],
    specs: [
      { label: 'Gramaje disponible', value: '70 a 110 g/m²' },
      { label: 'Capacidad de carga', value: '25 a 50 kg' },
      { label: 'Formato', value: 'Plano con opción de fuelles' },
      { label: 'Impresión', value: 'Flexografía hasta 3 colores por cara' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/bolsa-chica.jpg',
      '/inbolsaNeo/imgs/bolsa-mediana.jpg'
    ]
  },
  'sacos-red': {
    name: 'Sacos de red',
    category: 'Sacos PP',
    cover: '/inbolsaNeo/imgs/bolsa-mediana.jpg',
    shortDescription: 'Bolsa mallada con excelente ventilación para frutas y hortalizas.',
    summary: 'La estructura tramada permite flujo de aire constante, ideal para productos que continúan respirando en postcosecha.',
    description: [
      'los sacos tejidos tipo red ofrecen resistencia superior y excelente ventilación, garantizando una manipulación segura en cada etapa del proceso logístico. Su diseño ligero pero robusto los convierte en una solución eficiente y confiable para la industria agronómica, especialmente en el envasado y transporte de productos agrícolas como papas, cebollas y otros tubérculos',
      'Gracias a su estructura flexible, permiten un llenado y vaciado ágil, reduciendo tiempos de operación y optimizando el manejo del producto. Además, su transparencia y acabado uniforme facilitan la identificación visual del contenido, aportando un valor estético y funcional que refuerza la presentación del producto final.'
    ],
    features: [
      'Monofilamento estabilizado para evitar decoloración bajo luz solar.',
      'Estructura que soporta impactos sin deformar la mercadería.',
      'Compatible con envasadoras automáticas y semiautomáticas.',
      'Posibilidad de incluir etiqueta lateral o cinta térmica.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/sacos-red-1.svg',
      '/inbolsaNeo/imgs/icons/sacos-red-2.svg',
      '/inbolsaNeo/imgs/icons/sacos-red-3.svg'
    ],
    specs: [
      { label: 'Anchos disponibles', value: '30 a 60 cm' },
      { label: 'Metraje por rollo', value: '100 a 600 m' },
      { label: 'Carga recomendada', value: '5 a 20 kg' },
      { label: 'Colores', value: 'Personalizados, opaco o bicolor' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/bolsa-mediana.jpg'
    ]
  },
  'sacos-laminados': {
    name: 'Sacos laminados',
    category: 'Sacos PP',
    cover: '/inbolsaNeo/imgs/bolsa-enorme.jpg',
    shortDescription: 'Saco tejido laminado en coextrusión para proteger contra humedad y polvo.',
    summary: 'Combina rafia de resistencia mecánica con film coex para lograr barrera ante finos y agentes climáticos.',
    description: [
      'La laminación coex reduce la migración de finos y minimiza entradas de humedad en almacenajes prolongados. Es ideal para productos sensibles al agua o aromatizados.',
      'Se entrega impreso en alta resolución y con diversas opciones de válvulas o fuelles para optimizar procesos de llenado.'
    ],
    features: [
      'Coeficiente de fricción calibrado para apilado seguro.',
      'Barrera de polietileno coex de 25 micras como estándar.',
      'Opción de microperforado o microventeo para cargas calientes.',
      'Personalización total de dimensiones y densidad del tejido.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/sacos-laminados-1.svg',
      '/inbolsaNeo/imgs/icons/sacos-laminados-2.svg',
      '/inbolsaNeo/imgs/icons/sacos-laminados-3.svg'
    ],
    specs: [
      { label: 'Gramaje tejido', value: '80 a 120 g/m²' },
      { label: 'Espesor film', value: '20 a 40 micras' },
      { label: 'Capacidades', value: '15 a 50 kg' },
      { label: 'Formatos disponibles', value: 'Plano, con fuelles o valvulado' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/bolsa-enorme.jpg'
    ]
  },
  'sacos-laminacion-premium': {
    name: 'Sacos con laminación premium',
    category: 'Sacos PP',
    cover: '/inbolsaNeo/imgs/bolsa-enorme.jpg',
    shortDescription: 'Acabado superior con brillo o tacto mate para productos de alto valor.',
    summary: 'Incluye láminas coex de alto brillo, mate o soft touch y relieve localizado para resaltar la marca.',
    description: [
      'La versión premium agrega un film de presentación con alto impacto visual, adecuado para retail y productos diferenciados. Combinamos refuerzos interiores con tratamientos UV de larga duración.',
      'Permite ventanas transparentes y cortes troquelados para vista del contenido sin comprometer la barrera contra polvo.'
    ],
    features: [
      'Acabado brillante, mate o tacto gomoso según requerimiento.',
      'Posibilidad de barniz selectivo y relieve en logotipo.',
      'Compatible con costura tradicional o sellado ultrasónico.',
      'Se suministra con certificados de contacto indirecto con alimentos.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/sacos-laminacion-premium-1.svg',
      '/inbolsaNeo/imgs/icons/sacos-laminacion-premium-2.svg',
      '/inbolsaNeo/imgs/icons/sacos-laminacion-premium-3.svg'
    ],
    specs: [
      { label: 'Gramaje tejido', value: '90 a 130 g/m²' },
      { label: 'Film decorativo', value: 'BOPP 18-25 micras' },
      { label: 'Anchos', value: '40 a 65 cm' },
      { label: 'Impresión', value: 'Alta definición en 8 colores' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/bolsa-enorme.jpg'
    ]
  },
  'sacos-planos': {
    name: 'Sacos planos',
    category: 'Sacos PP',
    cover: '/inbolsaNeo/imgs/bolsa-enorme.jpg',
    shortDescription: 'Bolsa plana sin fuelles para llenado directo y apilado en estibas.',
    summary: 'La configuración plana optimiza el llenado por gravedad y ofrece soporte uniforme en pallet.',
    description: [
      'Confeccionados con tejido de rafia uniformemente tensado y costuras rectas reforzadas, permiten apilado estable y reducen arrugas en el frente impreso.',
      'Disponibles en versiones laminadas o respirables y con interior PE para líneas automatizadas.'
    ],
    features: [
      'Corte por ultrasonido que evita hilachas.',
      'Borde superior termosellado o con dobladillo de seguridad.',
      'Marcado lateral para control de nivel durante el llenado.',
      'Opciones de bolsa interior coex para productos finos.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/sacos-planos-1.svg',
      '/inbolsaNeo/imgs/icons/sacos-planos-2.svg',
      '/inbolsaNeo/imgs/icons/sacos-planos-3.svg'
    ],
    specs: [
      { label: 'Anchos', value: '35 a 60 cm' },
      { label: 'Largos', value: '55 a 110 cm' },
      { label: 'Costura inferior', value: 'Doble cadena con refuerzo' },
      { label: 'Tolva', value: 'Compatible con llenadoras rectas' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/bolsa-enorme.jpg'
    ]
  },
  'sacos-fondo-cuadrado': {
    name: 'Sacos con fondo cuadrado',
    category: 'Sacos PP',
    cover: '/inbolsaNeo/imgs/bolsa-enorme.jpg',
    shortDescription: 'Formato tipo block bottom para exhibición en punto de venta.',
    summary: 'El fondo cuadrado permite que el saco quede erguido y mejora la presentación en isla o estantería.',
    description: [
      'Utilizamos maquinaria AD Star para soldar las esquinas y garantizar cierre hermético sin costuras expuestas. El saco admite llenado automatizado con inyección y sellado posterior.',
      'Se suministra con ventilación controlada y posibilidad de válvula frontal o lateral según el producto.'
    ],
    features: [
      'Construcción block bottom 100% polipropileno.',
      'Resistencia superior a cargas de impacto y vibración.',
      'Permite apilados de hasta 8 niveles sin deformar.',
      'Amplia superficie frontal para branding y mensajes.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/sacos-fondo-cuadrado-1.svg',
      '/inbolsaNeo/imgs/icons/sacos-fondo-cuadrado-2.svg',
      '/inbolsaNeo/imgs/icons/sacos-fondo-cuadrado-3.svg'
    ],
    specs: [
      { label: 'Capacidades', value: '20, 25 y 50 kg' },
      { label: 'Sistema de cierre', value: 'Válvula interna con soldado térmico' },
      { label: 'Perforaciones', value: 'Microperforado de 0.5 mm opcional' },
      { label: 'Línea', value: 'Compatible con llenadoras AD Star' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/bolsa-enorme.jpg'
    ]
  },
  'big-bag-tubular': {
    name: 'Big Bag Tubular',
    category: 'Big Bag',
    cover: '/inbolsaNeo/imgs/hilo-algodon.jpg',
    shortDescription: 'FIBC de cuerpo continuo sin costuras laterales para maximizar resistencia.',
    summary: 'Fabricado con rafia tubular de polipropileno de alta tenacidad y carga segura hasta 1500 kg.',
    description: [
      'El cuerpo tubular elimina costuras laterales, reduciendo puntos de falla y aportando mejor retención de polvo. Ideal para productos peligrosos o con requerimientos de limpieza superior.',
      'Disponible en clases SF 5:1 y 6:1 con certificado para industrias alimenticias o químicas.'
    ],
    features: [
      'Cuerpo continuo de tejido circular sin costura.',
      'Refuerzo inferior cruzado para distribuir el peso.',
      'Estructuras de asas en uno, dos o cuatro puntos.',
      'Recubrimiento interior opcional con liner de PE.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/big-bag-tubular-1.svg',
      '/inbolsaNeo/imgs/icons/big-bag-tubular-2.svg',
      '/inbolsaNeo/imgs/icons/big-bag-tubular-3.svg'
    ],
    specs: [
      { label: 'Factor de seguridad', value: '5:1 o 6:1 según ISO 21898' },
      { label: 'Carga recomendada', value: '500 a 1500 kg' },
      { label: 'Boca de carga', value: 'Cilíndrica, en falda o con válvula' },
      { label: 'Descarga', value: 'Válvula circular con amarra' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-algodon.jpg',
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  },
  'big-bag-u-panel': {
    name: 'Big Bag U Panel',
    category: 'Big Bag',
    cover: '/inbolsaNeo/imgs/hilo-nylon.jpg',
    shortDescription: 'Construcción en forma de U para estabilidad dimensional y armado rápido.',
    summary: 'Tres paneles (uno en forma de U y dos laterales) que aportan capacidad de carga uniforme y excelente apilabilidad.',
    description: [
      'Es el modelo más versátil, recomendado para industrias de alimentos, minería y materiales de construcción. Se adapta a diferentes configuraciones de asas y liners.',
      'La costura reforzada y pruebas de estallido garantizan seguridad en manipulación con autoelevadores o grúas.'
    ],
    features: [
      'Paneles cosidos con hilo de alta tenacidad.',
      'Refuerzos verticales que evitan deformaciones.',
      'Puede incluir ventana de inspección o document pocket.',
      'Compatible con llenado automático y descarga controlada.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/big-bag-u-panel-1.svg',
      '/inbolsaNeo/imgs/icons/big-bag-u-panel-2.svg',
      '/inbolsaNeo/imgs/icons/big-bag-u-panel-3.svg'
    ],
    specs: [
      { label: 'Capacidad de carga', value: '500 a 2000 kg' },
      { label: 'Dimensión estándar', value: '90 x 90 x 110 cm' },
      { label: 'Asas', value: '4 asas de 30 o 40 cm' },
      { label: 'Liner interno', value: 'Disponible en PE liso o sellado' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  },
  'big-bag-cuadripanel': {
    name: 'Big Bag cuadripanel',
    category: 'Big Bag',
    cover: '/inbolsaNeo/imgs/hilo-nylon.jpg',
    shortDescription: 'FIBC de cuatro paneles cosidos para mantener forma cúbica.',
    summary: 'Diseñado para optimizar espacio en contenedores y transporte terrestre gracias a caras reforzadas.',
    description: [
      'Cada panel se cose por separado, lo que permite controlar la elongación en cada cara y mantener la forma recta incluso con cargas densas.',
      'Acepta tratamientos antiestáticos tipo B o C y liners con válvula para productos reactivos.'
    ],
    features: [
      'Cuatro paneles independientes con refuerzo diagonal.',
      'Costuras recubiertas para minimizar fuga de polvo.',
      'Puede incluir faldón superior y falda inferior.',
      'Etiqueta RFID opcional para trazabilidad.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/big-bag-cuadripanel-1.svg',
      '/inbolsaNeo/imgs/icons/big-bag-cuadripanel-2.svg',
      '/inbolsaNeo/imgs/icons/big-bag-cuadripanel-3.svg'
    ],
    specs: [
      { label: 'Carga útil', value: 'Hasta 1500 kg' },
      { label: 'Factor de seguridad', value: '5:1' },
      { label: 'Tejido', value: 'Polipropileno 160 g/m²' },
      { label: 'Aperturas', value: 'Superior con válvula o falda completa' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  },
  'big-bag-compartimentada': {
    name: 'Big Bag compartimentada',
    category: 'Big Bag',
    cover: '/inbolsaNeo/imgs/hilo-nylon.jpg',
    shortDescription: 'FIBC con tabiques internos que sostienen forma y distribuyen la carga.',
    summary: 'Incluye paneles internos cosidos que impiden el abombamiento y favorecen apilados perfectos.',
    description: [
      'Los compartimentos internos crean columnas que mantienen las paredes rectas y controlan el flujo del producto. Permite aumentar la capacidad volumétrica sin comprometer la estabilidad.',
      'Disponible con liners soldados para productos higroscópicos o sensibles a la humedad.'
    ],
    features: [
      'Paneles estabilizadores internos (baffles).',
      'Costuras dobles con refuerzo sobre tabiques.',
      'Asas anchas para movimiento seguro con grúas.',
      'Trampilla de descarga con cordón asegurador.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/big-bag-compartimentada-1.svg',
      '/inbolsaNeo/imgs/icons/big-bag-compartimentada-2.svg',
      '/inbolsaNeo/imgs/icons/big-bag-compartimentada-3.svg'
    ],
    specs: [
      { label: 'Factor de seguridad', value: '5:1 o 6:1' },
      { label: 'Dimensión sugerida', value: '95 x 95 x 120 cm' },
      { label: 'Boca de carga', value: 'Con válvula o tapa completa' },
      { label: 'Boca de descarga', value: 'Válvula de 35 cm con cordón' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  },
  'sling-bag': {
    name: 'Sling Bag',
    category: 'Big Bag',
    cover: '/inbolsaNeo/imgs/hilo-nylon.jpg',
    shortDescription: 'Bolsa tipo eslinga económica para cargas medianas y picking rápido.',
    summary: 'Diseño ligero con dos asas continuas que envuelven el cuerpo para manipular sin pallets.',
    description: [
      'El Sling Bag reduce costos logísticos porque permite manipular cargas de hasta 1000 kg sin pallets. Las eslingas integradas se adaptan a autoelevadores o puentes grúa.',
      'Opción de laminar el cuerpo o agregar liner interior según el producto a transportar.'
    ],
    features: [
      'Cuerpo tubular o panel simple según pedido.',
      'Eslingas integradas continuas de polipropileno.',
      'Costuras reforzadas con hilo de poliéster.',
      'Fácil plegado para retornos o reciclaje.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/sling-bag-1.svg',
      '/inbolsaNeo/imgs/icons/sling-bag-2.svg',
      '/inbolsaNeo/imgs/icons/sling-bag-3.svg'
    ],
    specs: [
      { label: 'Capacidad de carga', value: '400 a 1000 kg' },
      { label: 'Longitud de eslinga', value: '90 a 110 cm' },
      { label: 'Tejido', value: 'Polipropileno 140 g/m²' },
      { label: 'Opciones', value: 'Con o sin faldón superior' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  },
  'tela-plana': {
    name: 'Tela plana',
    category: 'Telas',
    cover: '/inbolsaNeo/imgs/hilo-algodon.jpg',
    shortDescription: 'Rollo tejido plano para conversión en sacos o aplicaciones industriales.',
    summary: 'Tela de rafia PP fabricada en anchos hasta 320 cm, con tratamientos de fricción y anti UV.',
    description: [
      'Se suministra en rollos con mandril y film protector para facilitar el montaje en máquinas de confección. Admitimos corte longitudinal con orillo termosellado.',
      'La superficie lisa reduce desgaste en procesos de impresión y mejora adhesión de láminas o recubrimientos.'
    ],
    features: [
      'Control de gramaje ±3%.',
      'Aditivo anti UV para almacenamiento a cielo abierto.',
      'Posibilidad de tramado antideslizante.',
      'Entrega en rollos de hasta 500 m lineales.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/tela-plana-1.svg',
      '/inbolsaNeo/imgs/icons/tela-plana-2.svg',
      '/inbolsaNeo/imgs/icons/tela-plana-3.svg'
    ],
    specs: [
      { label: 'Gramaje', value: '60 a 120 g/m²' },
      { label: 'Anchos', value: '80 a 320 cm' },
      { label: 'Color', value: 'Natural, blanco o según pedido' },
      { label: 'Tratamientos', value: 'Antiestático, anti UV, corona' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-algodon.jpg'
    ]
  },
  'tela-tubular': {
    name: 'Tela tubular',
    category: 'Telas',
    cover: '/inbolsaNeo/imgs/hilo-nylon.jpg',
    shortDescription: 'Tejido circular continuo ideal para big bags y mangas protectoras.',
    summary: 'Se fabrica en telares circulares de última generación para lograr paredes homogéneas y alta resistencia.',
    description: [
      'La producción tubular evita costuras longitudinales, manteniendo la resistencia completa del material. Entregamos en rollos precortados con marcas de impresión.',
      'Disponible con bandas de refuerzo y microperforación para ventilación controlada.'
    ],
    features: [
      'Tensión del trenzado calibrada para elongación controlada.',
      'Bobinas con identificación por código QR.',
      'Se puede suministrar plegada para extrusión secundaria.',
      'Compatible con procesos automatizados de conversión.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/tela-tubular-1.svg',
      '/inbolsaNeo/imgs/icons/tela-tubular-2.svg',
      '/inbolsaNeo/imgs/icons/tela-tubular-3.svg'
    ],
    specs: [
      { label: 'Diámetro plano', value: '60 a 220 cm' },
      { label: 'Gramaje', value: '110 a 220 g/m²' },
      { label: 'Bobina', value: 'Hasta 400 kg' },
      { label: 'Acabados', value: 'Corona, antideslizante, anti UV' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  },
  'hilo-plano': {
    name: 'Hilo Plano',
    category: 'Hilos y sogas',
    cover: '/inbolsaNeo/imgs/hilo-algodon.jpg',
    shortDescription: 'Hilo de rafia plano para costura de sacos y embalajes pesados.',
    summary: 'Fabricado con fibras de polipropileno virgen que aseguran costuras limpias y de alto desempeño.',
    description: [
      'Se presenta en bobinas uniformes que aseguran tensado constante en máquinas cosedoras. Disponible con lubricación específica para altas velocidades.',
      'Opciones en color natural o pigmentado, con resistencia certificada y baja elongación.'
    ],
    features: [
      'Excelente resistencia al deshilachado.',
      'Compatible con cosedoras portátiles y de columna.',
      'Presentación en conos de 1 y 2 kg.',
      'Calidad alimentaria disponible bajo pedido.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/hilo-plano-1.svg',
      '/inbolsaNeo/imgs/icons/hilo-plano-2.svg',
      '/inbolsaNeo/imgs/icons/hilo-plano-3.svg'
    ],
    specs: [
      { label: 'Título', value: '1200 a 3000 den' },
      { label: 'Resistencia', value: 'Hasta 7.5 kg' },
      { label: 'Color', value: 'Natural, blanco, pigmentado' },
      { label: 'Lubricación', value: 'Seco o con acabado siliconado' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-algodon.jpg'
    ]
  },
  'hilo-multifilamentado': {
    name: 'Hilo multifilamento',
    category: 'Hilos y sogas',
    cover: '/inbolsaNeo/imgs/hilo-nylon.jpg',
    shortDescription: 'Hilo de poliamida o polipropileno de alto número de filamentos para costuras exigentes.',
    summary: 'Proporciona elasticidad controlada y terminaciones suaves, ideal para cosidos que requieren sellado hermético.',
    description: [
      'Fabricado mediante texturizado y retorcido que evita nudos y garantiza un desenrollado uniforme. Se adapta a máquinas industriales de alta velocidad.',
      'Disponible con tratamientos antiestáticos y estabilización UV para uso exterior.'
    ],
    features: [
      'Baja fricción y excelente deslizamiento en guías.',
      'No deja residuos ni pelusa en alimentos.',
      'Opción de color con masterbatch sólido.',
      'Elongación controlada para absorción de impactos.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/hilo-multifilamentado-1.svg',
      '/inbolsaNeo/imgs/icons/hilo-multifilamentado-2.svg',
      '/inbolsaNeo/imgs/icons/hilo-multifilamentado-3.svg'
    ],
    specs: [
      { label: 'Título', value: '840 a 2100 den' },
      { label: 'Resistencia', value: 'Hasta 9.5 kg' },
      { label: 'Presentación', value: 'Bobinas de 5 kg' },
      { label: 'Materia prima', value: 'PP o PA según requerimiento' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  },
  'hilo-reforzado-pp': {
    name: 'Hilo reforzado pp',
    category: 'Hilos y sogas',
    cover: '/inbolsaNeo/imgs/hilo-nylon.jpg',
    shortDescription: 'Monofilamento de polipropileno reforzado con aditivos de alta tenacidad.',
    summary: 'Diseñado para costuras sometidas a vibración o desgaste continuo en transporte.',
    description: [
      'El refuerzo proporciona mayor resistencia al corte y abrasión, lo que evita rupturas en procesos logísticos intensivos.',
      'Recomendado para costura de sacos pesados y sujeción de empaques exportación.'
    ],
    features: [
      'Alto módulo de elasticidad.',
      'Tratamiento anti UV para transporte exterior.',
      'Disponible con pigmento antiestático.',
      'Bobinas selladas al vacío para mayor vida útil.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/hilo-reforzado-pp-1.svg',
      '/inbolsaNeo/imgs/icons/hilo-reforzado-pp-2.svg',
      '/inbolsaNeo/imgs/icons/hilo-reforzado-pp-3.svg'
    ],
    specs: [
      { label: 'Título', value: '1500 a 2600 den' },
      { label: 'Resistencia', value: 'Hasta 11 kg' },
      { label: 'Presentación', value: 'Bobina de 4 a 6 kg' },
      { label: 'Color', value: 'Natural o pigmentado según Pantone' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  },
  'hilo-reforzado-multifilamento': {
    name: 'Hilo reforzado multifilamento',
    category: 'Hilos y sogas',
    cover: '/inbolsaNeo/imgs/hilo-nylon.jpg',
    shortDescription: 'Cordones de finos filamentos torsionados para un cierre hermético y resistente.',
    summary: 'Combina la flexibilidad del multifilamento con un alma reforzada para cargas extremas.',
    description: [
      'El alma central aporta rigidez mientras que la cobertura externa mantiene un tacto suave, evitando daños en costuras aparentes.',
      'Ideal para packaging exportación donde se requieren costuras certificadas y pruebas de esfuerzo repetitivas.'
    ],
    features: [
      'Resistencia a la abrasión superior.',
      'Se adapta a máquinas de costura doble aguja.',
      'Disponible con previa calibración de tensión.',
      'No absorbe humedad y mantiene peso constante.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/hilo-reforzado-multifilamento-1.svg',
      '/inbolsaNeo/imgs/icons/hilo-reforzado-multifilamento-2.svg',
      '/inbolsaNeo/imgs/icons/hilo-reforzado-multifilamento-3.svg'
    ],
    specs: [
      { label: 'Título', value: '1800 a 3200 den' },
      { label: 'Resistencia', value: 'Hasta 12 kg' },
      { label: 'Presentación', value: 'Conos de 5 kg' },
      { label: 'Acabado', value: 'Lubricado o seco' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  },
  'amarres': {
    name: 'Amarres',
    category: 'Hilos y sogas',
    cover: '/inbolsaNeo/imgs/hilo-nylon.jpg',
    shortDescription: 'Cintas y sogas trenzadas para asegurar cargas y cierres rápidos.',
    summary: 'Fabricadas en polipropileno de alta densidad o polietileno de baja memoria, según la aplicación requerida.',
    description: [
      'Producimos amarres planos, redondos o retorcidos con calibres específicos, ideales para sujeción de sacos, pallets y lonas.',
      'Disponibles en rollos cortados o en lazos preformados con terminal termoencogible.'
    ],
    features: [
      'Resistencia comprobada en ensayos de tracción.',
      'Alta flexibilidad para nudos rápidos.',
      'Colores codificados para procesos Lean.',
      'Resistentes a la humedad y agentes químicos.'
    ],
    applications: [
      '/inbolsaNeo/imgs/icons/amarres-1.svg',
      '/inbolsaNeo/imgs/icons/amarres-2.svg',
      '/inbolsaNeo/imgs/icons/amarres-3.svg'
    ],
    specs: [
      { label: 'Diámetros', value: '3 a 12 mm' },
      { label: 'Resistencia', value: '120 a 650 kg' },
      { label: 'Presentación', value: 'Rollos de 200 o 500 m' },
      { label: 'Colores', value: 'Natural, negro, azul, rojo' }
    ],
    gallery: [
      '/inbolsaNeo/imgs/hilo-nylon.jpg'
    ]
  }
} as const;

type ProductId = keyof typeof PRODUCT_DETAILS;
---

<style>
  
  
  /* Header Pattern Background */
  .pattern-bg {
    background-image: 
      linear-gradient(135deg, rgba(62, 125, 210, 0.03) 25%, transparent 25%),
      linear-gradient(225deg, rgba(62, 125, 210, 0.03) 25%, transparent 25%),
      linear-gradient(45deg, rgba(62, 125, 210, 0.03) 25%, transparent 25%),
      linear-gradient(315deg, rgba(62, 125, 210, 0.03) 25%, transparent 25%);
    background-size: 40px 40px;
    background-position: 0 0, 0 0, 20px 20px, 20px 20px;
  }

  /* Product Card Hover Effects */
  .product-card {
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: hidden;
  }

  .product-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(62, 125, 210, 0.1),
      transparent
    );
    transition: left 0.6s ease;
  }

  .product-card:hover::before {
    left: 100%;
  }

  .product-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 20px 40px -10px rgba(62, 125, 210, 0.25);
  }

  /* Image Zoom Effect */
  .product-img-wrapper {
    overflow: hidden;
    position: relative;
  }

  .product-img-wrapper::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(62, 125, 210, 0.4), rgba(37, 99, 235, 0.4));
    opacity: 0;
    transition: opacity 0.4s ease;
  }

  .product-card:hover .product-img-wrapper::after {
    opacity: 1;
  }

  .product-img {
    transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .product-card:hover .product-img {
    transform: scale(1.15);
  }

  /* Badge Styles */
  .category-badge {
    background: linear-gradient(135deg, #3E7DD2, #2563eb);
    box-shadow: 0 4px 12px rgba(62, 125, 210, 0.3);
  }

  /* Modal Animations */
  @keyframes modalFadeIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .modal-content {
    animation: modalFadeIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Icon Container Styles */
  .icon-container {
    background: linear-gradient(135deg, rgba(62, 125, 210, 0.1), rgba(62, 125, 210, 0.05));
    border: 2px solid rgba(62, 125, 210, 0.2);
    transition: all 0.3s ease;
  }

  .icon-container:hover {
    background: linear-gradient(135deg, rgba(62, 125, 210, 0.2), rgba(62, 125, 210, 0.1));
    border-color: rgba(62, 125, 210, 0.4);
    transform: scale(1.05);
  }

  /* Spec Table Styles */
  .spec-row {
    transition: all 0.3s ease;
  }

  .spec-row:hover {
    background: linear-gradient(90deg, rgba(62, 125, 210, 0.05), transparent);
    transform: translateX(4px);
  }

  /* Feature List Styles */
  .feature-item {
    position: relative;
    padding-left: 32px;
    transition: all 0.3s ease;
  }

  .feature-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    background: linear-gradient(135deg, #3E7DD2, #2563eb);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .feature-item::after {
    content: '✓';
    position: absolute;
    left: 5px;
    top: 50%;
    transform: translateY(-50%);
    color: white;
    font-size: 12px;
    font-weight: bold;
  }

  .feature-item:hover {
    color: #3E7DD2;
    padding-left: 36px;
  }

  /* Scrollbar Styles */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #3E7DD2, #2563eb);
    border-radius: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #2563eb, #1d4ed8);
  }

  /* Gallery Grid */
  .gallery-item {
    position: relative;
    overflow: hidden;
    border-radius: 16px;
    transition: all 0.3s ease;
  }

  .gallery-item:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  }

  .gallery-item img {
    transition: transform 0.5s ease;
  }

  .gallery-item:hover img {
    transform: scale(1.1);
  }
</style>

<Base title={pageTitle}>
  <Header />

  <!-- Hero Section con estilo Sacaria -->
      <section class="relative overflow-hidden bg-gradient-to-b from-brand-100 via-sky-50 to-white">
        <div class="absolute inset-0 opacity-60">
          <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, rgba(59,130,246,0.08) 0%, transparent 55%); background-size: 48px 48px;"></div>
        </div>

        <div class="absolute top-20 -left-32 w-[28rem] h-[28rem] bg-brand-200/35 rounded-full blur-3xl"></div>
        <div class="absolute bottom-10 -right-32 w-[26rem] h-[26rem] bg-sky-200/30 rounded-full blur-3xl"></div>

        <div class="relative mx-auto max-w-7xl px-4 py-16 md:py-24">
          <div class="text-center">
            <h1 class="text-4xl md:text-6xl font-black uppercase tracking-tight text-slate-900 mb-6">
              Nuestros
              <span class="block mt-2 bg-gradient-to-r from-brand-500 via-brand-600 to-sky-500 bg-clip-text text-transparent">
                Productos
              </span>
            </h1>

            <p class="text-lg md:text-xl text-slate-700 max-w-3xl mx-auto leading-relaxed">
              Soluciones especializadas en polipropileno para industrias exigentes
            </p>
          </div>
        </div>

    <div class="absolute bottom-0 left-0 right-0">
      <svg viewBox="0 0 1440 100" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full">
        <path d="M0 0L60 8.33C120 16.7 240 33.3 360 41.7C480 50 600 50 720 45C840 40 960 30 1080 28.3C1200 26.7 1320 33.3 1380 36.7L1440 40V100H1380C1320 100 1200 100 1080 100C960 100 840 100 720 100C600 100 480 100 360 100C240 100 120 100 60 100H0V0Z" fill="white"/>
      </svg>
    </div>
  </section>

  <main class="mx-auto max-w-7xl px-4 py-12">
    <nav class="sticky top-24 z-20 mb-12" data-nav-wrapper>
      <div class="rounded-2xl border border-white/70 bg-white/85 shadow-sm backdrop-blur">
        <ul class="flex flex-wrap items-center justify-center gap-2 px-4 py-3 text-xs font-semibold uppercase text-brand-700 md:gap-3">
          {PRODUCT_NAV.map((item) => (
            <li data-nav-item={item.id}>
              <a
                href={`#${item.id}`}
                class="inline-flex items-center gap-2 rounded-full border border-brand-200 bg-white px-4 py-2 shadow-sm transition hover:-translate-y-0.5 hover:bg-brand-50 hover:text-brand-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-500"
              >
                <span class="h-2 w-2 rounded-full bg-brand-500"></span>
                {item.label}
              </a>
            </li>
          ))}
        </ul>
      </div>
    </nav>
    {CATALOG.map((group, groupIndex) => {
      const sectionId = PRODUCT_NAV[groupIndex]?.id ?? slugify(group.cat);
      return (
      <section id={sectionId} data-product-group={sectionId} class="mb-16 scroll-mt-32">
        <!-- Category Header -->
        <div class="mb-8">
          <div class="flex items-center gap-4 mb-4">
            <div class="h-1 w-16 bg-gradient-to-r from-brand-600 to-brand-400 rounded-full"></div>
            <h2 class="text-3xl font-black uppercase tracking-tight text-slate-900">
              {group.cat}
            </h2>
          </div>
          <p class="text-slate-600 ml-20">Productos especializados de alta calidad</p>
        </div>

        <!-- Products Grid -->
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {group.items.map((p) => {
            const detail = PRODUCT_DETAILS[p.id as ProductId];
            const applicationIcons = Array.isArray(detail?.applications) ? detail?.applications : [];
            return (
              <article 
                data-product-id={p.id} 
                class="product-card flex flex-col rounded-2xl border-2 border-slate-200 bg-white shadow-lg"
              >
                {/* Image Section */}
                <div class="product-img-wrapper aspect-[4/3] w-full rounded-t-2xl bg-gradient-to-br from-slate-100 to-slate-50 relative">
                  <img 
                    src={p.img} 
                    alt={p.name} 
                    class="product-img h-full w-full object-cover rounded-t-2xl" 
                    loading="lazy" 
                  />
                  <div class="absolute top-3 left-3">
                    <span class="category-badge inline-flex items-center gap-2 rounded-full px-4 py-1.5 text-xs font-bold uppercase tracking-wide text-white">
                      <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                      </svg>
                      {group.cat}
                    </span>
                  </div>
                </div>

                {/* Content Section */}
                <div class="flex flex-1 flex-col p-6">
                  <h3 class="text-xl font-bold text-slate-900 mb-3 leading-tight">
                    {p.name}
                  </h3>
                  
                  {detail?.shortDescription && (
                    <p class="text-sm text-slate-600 mb-4 leading-relaxed flex-1">
                      {detail.shortDescription}
                    </p>
                  )}

                  {/* Key Specs Preview */}
                  {detail?.specs && detail.specs.length > 0 && (
                    <div class="mb-4 space-y-2">
                      {detail.specs.slice(0, 2).map((spec) => (
                        <div class="flex items-start gap-2 text-xs">
                          <svg class="w-4 h-4 text-brand-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                          </svg>
                          <div>
                            <span class="font-semibold text-slate-700">{spec.label}:</span>
                            <span class="text-slate-600 ml-1">{spec.value}</span>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}

                  {/* Action Button */}
                  <button
                    type="button"
                    data-product-modal={p.id}
                    class="mt-auto inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-brand-600 to-brand-700 px-5 py-3 text-sm font-bold uppercase tracking-wide text-white transition-all hover:from-brand-700 hover:to-brand-800 hover:shadow-lg hover:shadow-brand-500/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2"
                  >
                    <span>Ver detalles</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/>
                    </svg>
                  </button>
                </div>
              </article>
            );
          })}
        </div>
      </section>
    );
    })}
  </main>

  <Footer />

  <!-- Modal de Producto -->
  <div
    id="productModal"
    class="fixed inset-0 z-50 hidden items-center justify-center px-4 py-6 bg-slate-900/80 backdrop-blur-sm"
    role="dialog"
    aria-modal="true"
  >
    <div class="modal-content relative z-10 max-h-[90vh] w-full max-w-5xl overflow-hidden rounded-3xl bg-white shadow-2xl">
      {/* Modal Header */}
      <div class="flex items-center justify-between border-b-2 border-brand-500 bg-gradient-to-r from-brand-600 to-brand-700 px-6 py-4">
        <div class="flex items-center gap-3">
          <div class="rounded-xl bg-white/20 p-2">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <h2 class="text-lg font-black uppercase tracking-wide text-white">Detalle del producto</h2>
        </div>
        <button
          type="button"
          class="rounded-xl bg-white/20 p-2 text-white transition hover:bg-white/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-brand-600"
          data-close
          aria-label="Cerrar detalle"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      
      {/* Modal Body */}
      <div id="productModalBody" class="custom-scrollbar max-h-[calc(90vh-80px)] overflow-y-auto bg-slate-50 p-6"></div>
    </div>
  </div>

  {/* Templates para los detalles de productos */}
  <div id="product-detail-templates" class="hidden" aria-hidden="true">
    {Object.entries(PRODUCT_DETAILS).map(([id, product]) => {
      const applicationIcons = Array.isArray(product.applications) ? product.applications : [];
      return (
        <template id={`product-detail-${id}`}>
        <article class="space-y-6">
          {/* Hero Card */}
          <div class="overflow-hidden rounded-2xl border-2 border-brand-200 bg-white shadow-xl">
            <div class="grid gap-0 lg:grid-cols-[2fr_3fr]">
              {/* Image Section */}
              <div class="relative bg-gradient-to-br from-brand-900 via-slate-900 to-brand-800 p-8">
                <div class="aspect-square w-full overflow-hidden rounded-2xl bg-white shadow-2xl">
                  <img
                    src={product.cover}
                    alt={`Imagen principal de ${product.name}`}
                    class="h-full w-full object-cover"
                    loading="lazy"
                  />
                </div>
              </div>

              {/* Info Section */}
              <div class="relative bg-white p-8">
                <div class="mb-6">
                  <span class="inline-flex items-center gap-2 rounded-full bg-brand-100 px-4 py-1.5 text-xs font-bold uppercase tracking-wide text-brand-700">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                    </svg>
                    {product.category}
                  </span>
                </div>
                
                <h3 class="text-3xl font-black uppercase text-slate-900 mb-4 tracking-tight">
                  {product.name}
                </h3>
                
                <p class="text-base text-slate-700 leading-relaxed mb-6">
                  {product.summary}
                </p>

                {/* Quick Specs */}
                <div class="grid gap-3 sm:grid-cols-2">
                  {product.specs.slice(0, 4).map((spec) => (
                    <div class="rounded-xl border-2 border-slate-200 bg-slate-50 p-3">
                      <dt class="text-xs font-bold uppercase tracking-wide text-slate-500 mb-1">{spec.label}</dt>
                      <dd class="text-sm font-bold text-brand-700">{spec.value}</dd>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>

          {/* Description */}
          <div class="rounded-2xl border-2 border-slate-200 bg-white p-6 shadow-lg">
            <div class="flex items-center gap-3 mb-4 pb-4 border-b-2 border-brand-500">
              <div class="icon-container rounded-xl p-2">
                <svg class="w-5 h-5 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
              </div>
              <h4 class="text-xl font-black uppercase tracking-tight text-slate-900">Descripción</h4>
            </div>
            <div class="space-y-3 text-sm leading-relaxed text-slate-700">
              {product.description.map((paragraph) => (
                <p>{paragraph}</p>
              ))}
            </div>
          </div>

          {/* Features & Applications */}
          <div class="grid gap-6 lg:grid-cols-2">
            {/* Features */}
            <div class="rounded-2xl border-2 border-brand-200 bg-white p-6 shadow-lg">
              <div class="flex items-center gap-3 mb-4 pb-4 border-b-2 border-brand-500">
                <div class="icon-container rounded-xl p-2">
                  <svg class="w-5 h-5 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                  </svg>
                </div>
                <h4 class="text-lg font-black uppercase tracking-tight text-slate-900">Características</h4>
              </div>
              <ul class="space-y-2 text-sm text-slate-700">
                {product.features.map((feature) => (
                  <li class="feature-item">{feature}</li>
                ))}
              </ul>
            </div>

            {/* Applications */}
            {applicationIcons.length > 0 && (
              <div class="rounded-2xl border-2 border-emerald-200 bg-white p-6 shadow-lg">
                <div class="flex items-center gap-3 mb-4 pb-4 border-b-2 border-emerald-500">
                  <div class="icon-container rounded-xl p-2">
                    <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                    </svg>
                  </div>
                  <h4 class="text-lg font-black uppercase tracking-tight text-slate-900">Aplicaciones</h4>
                </div>
                <ul class="grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4">
                  {(applicationIcons as string[]).map((iconSrc, index) => {
                    if (!iconSrc) return null;
                    return (
                      <li class="flex flex-col items-center justify-center" data-index={index}>
                        <span class="sr-only">{product.name ?? 'Aplicación'} {index + 1}</span>
                        <span class="flex h-16 w-16 items-center justify-center rounded-full border-2 border-emerald-300 bg-white shadow-md ring-1 ring-emerald-100">
                          <img
                            src={iconSrc}
                            alt=""
                            aria-hidden="true"
                            class="h-10 w-10 object-contain"
                            loading="lazy"
                          />
                        </span>
                      </li>
                    );
                  })}
                </ul>
              </div>
            )}
          </div>

          {/* Technical Specs Table */}
          <div class="rounded-2xl border-2 border-slate-200 bg-white shadow-lg overflow-hidden">
            <div class="flex items-center gap-3 bg-slate-900 text-white px-6 py-4">
              <div class="rounded-xl bg-white/20 p-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                </svg>
              </div>
              <h4 class="text-lg font-black uppercase tracking-tight">Especificaciones Técnicas</h4>
            </div>
            <div class="divide-y divide-slate-200">
              {product.specs.map((spec, index) => (
                <div class="spec-row grid grid-cols-2 gap-4 px-6 py-4 hover:bg-brand-50/50">
                  <dt class="font-bold text-slate-700 flex items-center gap-2">
                    <span class="flex-shrink-0 w-6 h-6 rounded-full bg-brand-100 text-brand-600 flex items-center justify-center text-xs font-bold">
                      {index + 1}
                    </span>
                    {spec.label}
                  </dt>
                  <dd class="text-slate-900 font-semibold">{spec.value}</dd>
                </div>
              ))}
            </div>
          </div>

          {/* Gallery */}
          {product.gallery.length > 0 && (
            <div class="rounded-2xl border-2 border-slate-200 bg-white p-6 shadow-lg">
              <div class="flex items-center gap-3 mb-6 pb-4 border-b-2 border-brand-500">
                <div class="icon-container rounded-xl p-2">
                  <svg class="w-5 h-5 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                  </svg>
                </div>
                <h4 class="text-lg font-black uppercase tracking-tight text-slate-900">Galería</h4>
              </div>
              <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
                {product.gallery.map((image, index) => (
                  <div class="gallery-item aspect-video bg-slate-100 shadow-md">
                    <img
                      src={image}
                      alt={`${product.name} imagen ${index + 1}`}
                      class="h-full w-full object-cover"
                      loading="lazy"
                    />
                  </div>
                ))}
              </div>
            </div>
          )}
        </article>
        </template>
      );
    })}
  </div>

  <script type="module">
    // TODO(claude): subcarpeta /inbolsaNeo para importaciones
    import { isPrivateEnabled, getGrantProducts, disablePrivate, checkAccessValid } from '/inbolsaNeo/lib/privado.js';

    (function(){
      // 1) Bloquea si no hay acceso privado
      try {
        if (!isPrivateEnabled()) {
          location.replace('/inbolsaNeo/');
          return;
        }
      }
      catch {
        location.replace('/inbolsaNeo/');
        return;
      }

      // 2) Recupera lista de productos
      let allowIds = [];
      try {
        allowIds = getGrantProducts();
        if (!Array.isArray(allowIds) || !allowIds.length) {
          const u = new URL(location.href);
          const p = u.searchParams.get('p');
          if (p) allowIds = p.split(',').map(s => s.trim()).filter(Boolean);
        }
      } catch {}

      // 3) Aplicar filtro inicial
      const cards = Array.from(document.querySelectorAll('[data-product-id]'));
      const empty = document.getElementById('empty-msg');
      const modal = document.getElementById('productModal');
      const modalBody = document.getElementById('productModalBody');

      function applyFilter() {
        if (!Array.isArray(allowIds) || allowIds.length === 0) {
          cards.forEach(el => { el.classList.add('hidden'); el.style.display = 'none'; });
          if (empty) empty.classList.remove('hidden');
          return;
        }

        const allow = new Set(allowIds);
        let anyVisible = false;
        cards.forEach(el => {
          const id = el.getAttribute('data-product-id') || '';
          if (!allow.has(id)) {
            el.classList.add('hidden');
            el.style.display = 'none';
          } else {
            el.classList.remove('hidden');
            el.style.display = '';
            anyVisible = true;
          }
        });
        if (empty) empty.classList.toggle('hidden', anyVisible);
      }

      applyFilter();

      function closeProductModal() {
        if (!modal || !modalBody) return;
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        modalBody.innerHTML = '';
        modal.removeAttribute('data-open');
        if (document.body) document.body.classList.remove('overflow-hidden');
      }

      function openProductModal(productId) {
        if (!modal || !modalBody) return;
        const template = document.getElementById('product-detail-' + productId);
        if (!template) return;

        const card = document.querySelector('[data-product-id="' + productId + '"]');
        if (card && (card.classList.contains('hidden') || card.style.display === 'none')) {
          return;
        }

        const fragment = template instanceof HTMLTemplateElement
          ? template.content.cloneNode(true)
          : template.cloneNode(true);

        modalBody.innerHTML = '';
        modalBody.appendChild(fragment);
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        modal.setAttribute('data-open', productId);
        modalBody.scrollTop = 0;
        if (document.body) document.body.classList.add('overflow-hidden');
      }

      document.addEventListener('click', (event) => {
        const trigger = event.target instanceof Element ? event.target.closest('[data-product-modal]') : null;
        if (trigger) {
          event.preventDefault();
          const productId = trigger.getAttribute('data-product-modal');
          if (productId) openProductModal(productId);
          return;
        }

        if (!modal || modal.classList.contains('hidden')) return;
        const closer = event.target instanceof Element ? event.target.closest('#productModal [data-close]') : null;
        if (closer) {
          event.preventDefault();
          closeProductModal();
        }
      });

      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && modal && !modal.classList.contains('hidden')) {
          closeProductModal();
        }
      });

      // 4) Verificar periódicamente si el acceso sigue válido
      async function verifyAccess() {
        try {
          console.log('Verificando validez del acceso en productos...');
          const isValid = await checkAccessValid();

          if (!isValid) {
            console.log('Acceso revocado, redirigiendo...');
            disablePrivate();
            window.location.href = '/inbolsaNeo/';
          }
        } catch (e) {
          console.error('Error verificando acceso:', e);
        }
      }

      // Verificar cada 10 segundos (más frecuente en productos)
      setInterval(verifyAccess, 10000);

      // Primera verificación inmediata después de 2 segundos
      setTimeout(verifyAccess, 2000);
    })();
  </script>
</Base>
